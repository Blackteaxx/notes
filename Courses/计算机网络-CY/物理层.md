## 物理层作用

定义了物理层的接口特性，包括：

- 机械特性
- 电气特性：规定电压范围、传输速率
- 功能特性：电平代表的含义
- 过程特性：如何开始和结束传输

## 物理传输媒介

传输媒介纯传输电磁波，物理层规定了电磁波的电气特性的实际含义，如高电平代表 1，低电平代表 0

导向性传输介质

- 双绞线（传递电）

- 同轴电缆（传递电）

- 光纤（传递光），需要光电转换，在纤芯内进行全反射

非导向型传输介质

- 无线电波
- 微波
- 红外线、激光

## 设备

数字信号在传输过程中可能会遇到 衰减、噪声、时延的问题，不利于接收端识别

中继器：对数字信号进行再生和还原（放大和整形），对衰减的信号进行放大，保持与原数据相同，增加信号传输的距离

## 数据通信基础

### 通信系统的基本组成

信号：数据的电气/电磁表现，是数据在传输过程中的**存在形式**

数字信号：离散的信号

模拟信号：连续的信号，可以有无限个值。

![img](https://img2023.cnblogs.com/blog/3436855/202406/3436855-20240613001436101-606711962.png)

信道上传输的信号有**基带**信号和**宽带**信号之分。

- **基带信号**：将数字信号 10 直接用两种电压表示，然后送到数字信道上传输
- **宽带信号**：将数字信号 10 转换为模拟信号，然后送到模拟信道上传输

### 数据传输速率

码元指用一个固定市场的信号波形，代表不同离散数值的基本波形（可以联想信息论中的符号/随机变量）

至于信息熵/自信息和信息量的关系，不做深究，可以简单认为 1 位 2 进制数能表示的状态数目 等同于 1 bit 信息（在等概率的条件下求期望），实际可以这样求

$$
H(S) = - \sum_{i=1}^n p_i \log_2 p_i
$$

1. 码元传输速率：码元的传输速率，单位是 baud
2. 比特传输速率：比特的传输速率，单位是 bps

$$
R_b = R_s \times \log_2 M
$$

### 带宽(Bandwidth)

在模拟信号系统中，带宽是指信号的频率范围，单位是 Hz。在传输过程中，信号的频率范围会受到信道的限制，这个限制就是带宽，带宽越大，传输的信号频率范围越广。

在数字设备中，表示单位时间内从网络中的某一点到达另一点的最高数据传输速率，单位是 bps。

## 信道的最大速率（采样定理）

信号在信道中传输中，会出现失真、噪声等问题

码元的传输速率与信号的频率有关，信号的频率越高，传输速率越高。

### 奈奎斯特定理

在**理想低通**条件下，为了避免**码间串扰**，极限码元传输速率为$2B Baud$，$B$是信道的带宽，单位 Hz。

一个等价的表述：如果一个任意信号通过了带宽为 $B$ 的低通滤波器，那么只要进行每秒 $2B$ 次采样，就可以完全恢复原始信号。

限制了**码元的传输速率上限**，但是**比特的传输速率**没有被直接限制（可以提供符号的信息量）。

$$
R_b = 2B \log_2 M
$$

### 香农定理

噪声的影响是相对的，信噪比很重要

信噪比定义为信号的平均功率与噪声的平均功率之比，记为$\frac{S}{N}$

$$
Ratio(dB) = 10 \log_{10} \frac{S}{N}
$$

对于一条带宽为 $B$ 的信道，如果信噪比为 $S/N$，那么该信道的最大传输速率为：

$$
C = B \log_2 (1 + \frac{S}{N})
$$

## 编码与调制

回顾：信道上传送信号的两种形式

- **基带信号**：将数字信号 10 直接用两种电压表示，然后送到数字信道上传输
- **宽带信号**：将数字信号 10 转换为模拟信号，然后送到模拟信道上传输。需要对基带信号进行载波调制，将信号的频率范围搬移到较高的频段

### 基带传输

将比特转换成信号

编码方案需要满足工程需要，即**带宽效率、时钟同步**、DC 平衡等

![img](https://img2023.cnblogs.com/blog/3436855/202406/3436855-20240613141707866-1709989373.png)

我们把**信号**变换的速率（1/一个时钟周期的长度）称为**符号率**，单位是 baud

而接收器必须知道一个符号何时结束和下一个符号何时开始，这就需要**时钟同步**，便于接收器正确采样和解码

- **NRZ 编码**：直接编码，高电平表示 1，低电平表示 0

  - 很容易得出，一长串的 0 或 1 会导致时钟同步问题
  - 时钟可能会出现漂移，例如 Mbps 传输速率的时钟漂移 1 $\mu s$，就会导致 1 bit 的误差

- **NRZI 编码**：非归零编码，只有数据发生变化时才发生变化
  - 0 时，保持原来的电平
  - 1 时，电平发生变化
  - 依旧会出现时钟同步问题

而一种较为聪明的方法是将时钟信号和数据信号一起传输，这就是**曼彻斯特编码**

- **曼彻斯特**编码：将时钟信号和数据信号做 XOR 操作，得到的信号就是曼彻斯特编码

  - 从低到高 表示 0，从高到低表示 1
  - 不会出现三个码元相同的情况，时钟同步问题得到解决
  - 但是会出现传输速率的问题，假设带宽为$B$，那么 NRZ 编码的传输速率为$2B$，而曼彻斯特编码的传输速率为$B$（因为两个码元表示 1 bit 信息）

- 4B/5B 编码：将 4 bit 数据编码成 5 bit，在 16 个编码中，挑选 8 个，保证没有连续超过 3 个 0 或 1
  - 假设带宽为$B$，那么 4B/5B 编码的传输速率为$1.6B$，带宽效率为 80%

### 通带传输

将基带信号转换为模拟信号，需要载波调制，具体方法就是对模拟信号$S(t) = A \sin (\omega t + \phi)$中的三个参数进行调制，分别是：

![img](https://img2023.cnblogs.com/blog/3436855/202406/3436855-20240613141811520-1690336838.png)

- **幅度调制**：调制的是信号的幅度，即$A$
- **频率调制**：调制的是信号的频率，即$\omega$
- **相位调制**：调制的是信号的相位，即$\phi$

通常，振幅和相位调制是同时进行的，称为**正交振幅调制**（QAM）

例题：符号率$1200 Baud$，采用 4 个相位，每一个相位有 4 个振幅，求传输速率

答案：$1200 \times \log 4\cdot4 = 4800 \ b/s$

**模拟信号转换为数字信号**的过程称为**解调**，解调的过程是对信号进行**采样**，然后进行**量化**，最后进行**编码**

- **采样**：对信号进行采样，得到一系列的采样点。依据奈奎斯特定理，**采样频率至少是信号频率的两倍**
- **量化**：将采样点的幅度量化为离散的值，通常是 8 位或 16 位
- **编码**：将量化后的信号编码成数字信号

而模拟数据调制为模拟信号的过程是为了实现传输的有效性，需要较高的频率（因为信号在传输过程中，可能会发生衰减）

## 数据交换方式

回顾：交换方式的分类

![img](https://img2023.cnblogs.com/blog/3436855/202406/3436855-20240613164846116-2020564016.png)

### 电路交换

- **电路交换**：建立连接，传输数据，释放连接。有这三个步骤的交换方式就叫做电路交换。
  在数据传输期间，源节点和目的节点之间有一条由**中间节点构成**的专用物理连接线路，在数据传输结束前，这条线路一直保持。

  - 优点： 传输速率高，传输稳定，适用于实时性强、大量数据传输的场景
  - 缺点： 线路利用率低，连接建立时间长。

### 报文交换

报文、也称消息(message)

- **报文交换**：使用**存储转发**的无连接方式，中间节点等待整个报文到达后转发

### 分组交换

分组交换会限制要传输的数据单位的长度

小数据块+控制信息（地址+序号）

- **分组交换**：使用**存储转发**的无连接方式，中间节点不需要等待整个分组到达就进行转发

分为数据报式和虚电路式，分别是**无连接**和**有连接**的分组交换

由于虚电路是逻辑电路，所以并不是电路交换，而是分组交换

## （静态）多路复用技术

在实践中，成本通常来自于开槽而不是线路费用，因此我们需要复用技术，将多个信号复用到一个信道上

对一条物理线路进行复用的主要方法有：

- 频分复用
- 时分复用
- 波分复用（与频分类似，是频分的光学形式）
- 码分复用

### FDM 频分复用

将频谱分为几个频带，每个频带分配给一个用户，用户之间不会干扰，可以同时传输

在初期会使用一个保护带，防止频带之间的相互干扰

同时会有一个将频谱更有效率的划分成没有保护带的频带，称为 **OFDM**，基本原理就是利用三角函数系（函数可以看成一个无限维的向量）正交性与傅里叶分解，对叠加波进行子载波的监听

这是从时域角度考虑的

![img](https://img2023.cnblogs.com/blog/3436855/202406/3436855-20240613170959369-772988605.png)

通过将信号调制成不同频率的子载波（可以使用振幅调制？），然后将这些子载波叠加在一起，在解调的时候通过积分的方式将不同频率的子载波分离出来

（具体的我也讲不清楚，没学过数字信号处理。。。）

### TDM 时分复用

将时间分为几个时隙，每个时隙分配给一个用户，用户之间不会干扰，可以同时传输，用户周期性的使用整个带宽一段时间

比较适宜由突发性的流量的时候

值得注意的是，统计时分复用 STDM 是与 TDM 不同的概念，是根据需求进行动态分配时间槽 time slot

![img](https://img2023.cnblogs.com/blog/3436855/202406/3436855-20240613172008321-1981038443.png)

![img](https://img2023.cnblogs.com/blog/3436855/202406/3436855-20240613172407131-1937340781.png)

### CDM 码分复用

**CDMA 码分多址**的关键条件

- 地址码足够长，能够保证各站点的地址码之间正交
- 发送来的消息在相位上与本地的地址码完全同步

我们发 1 bit 信息，可以用 1 个码元，也可以用 2 个码元，3 个码元，4 个码元，这样就可以将多个用户的信息**混合在一起**，然后通过解码的方式将信息分离出来

我们定义发送源的码片序列为 $S_i$，接收端的码元为 $R_j$，则接收端的码元可以表示为：

$$
R_j = \sum_{i=1}^n S_i \times C_{ij}
$$

其中 $C_{ij}$ 是第 $i$ 个发送源发给第 $j$ 个接收端的信息

我们定义每一个发送源的码片序列为正交的，即：

$$
0 = S_i^T \cdot S_j \\
1 = \frac{1}{m} S_i^T \cdot S_i
$$

这样就可以通过解码的方式将信息分离出来

### WDM 波分复用

就是光的频分多路复用
